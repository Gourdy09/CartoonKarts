[gd_scene load_steps=12 format=3 uid="uid://c384nwaumk6gg"]

[ext_resource type="Script" uid="uid://cag4pi0repndn" path="res://Scripts/CarEngine.cs" id="1_uoj53"]
[ext_resource type="ArrayMesh" uid="uid://b1gms6ix1bbrc" path="res://RedCar/car.obj" id="1_y3wrf"]
[ext_resource type="Script" uid="uid://depync31egix6" path="res://Scripts/PlayerInput.cs" id="2_k61xc"]
[ext_resource type="Script" uid="uid://don6oeyphdc68" path="res://Scripts/Gearbox.cs" id="3_k61xc"]
[ext_resource type="Script" uid="uid://dmqsehqbr5h3i" path="res://Scripts/Wheel.cs" id="4_06lh1"]
[ext_resource type="Script" uid="uid://b0g6b2blhy6oo" path="res://Scripts/Differential.cs" id="4_td361"]
[ext_resource type="Script" uid="uid://dbq31v68ydcvu" path="res://Scripts/PlayerCamera.cs" id="6_v0hk8"]
[ext_resource type="Script" uid="uid://nbvt5uqtjmlf" path="res://Scripts/GearDisplay.cs" id="8_argdw"]

[sub_resource type="BoxShape3D" id="BoxShape3D_24jkt"]
size = Vector3(1.93164, 0.916077, 3.79492)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_aqss3"]
albedo_color = Color(1, 0, 0, 1)

[sub_resource type="CylinderShape3D" id="CylinderShape3D_td361"]
height = 0.25
radius = 0.4

[node name="Car" type="Node3D"]

[node name="Player" type="Node3D" parent="."]

[node name="Chassis" type="RigidBody3D" parent="Player"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.1, 0)
gravity_scale = 0.0

[node name="CollisionShape3D" type="CollisionShape3D" parent="Player/Chassis"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.0683594, 0.208038, -0.0742188)
shape = SubResource("BoxShape3D_24jkt")

[node name="MeshInstance3D" type="MeshInstance3D" parent="Player/Chassis"]
transform = Transform3D(2, 0, 0, 0, 2, 0, 0, 0, 2, 0, 0, 0)
mesh = ExtResource("1_y3wrf")
skeleton = NodePath("")
surface_material_override/0 = SubResource("StandardMaterial3D_aqss3")

[node name="Engine" type="Node" parent="Player"]
script = ExtResource("1_uoj53")

[node name="PlayerInput" type="Node" parent="Player"]
script = ExtResource("2_k61xc")

[node name="Gearbox" type="Node" parent="Player"]
script = ExtResource("3_k61xc")

[node name="Differential" type="Node" parent="Player"]
script = ExtResource("4_td361")

[node name="FL" type="RigidBody3D" parent="Player"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.67, -0.1, 1)
mass = 5.0
script = ExtResource("4_06lh1")
rollingResistance = 3.0

[node name="CollisionShape3D" type="CollisionShape3D" parent="Player/FL"]
transform = Transform3D(-4.37114e-08, -1, 0, 1, -4.37114e-08, 0, 0, 0, 1, 0, 0, 0)
shape = SubResource("CylinderShape3D_td361")

[node name="Generic6DOFJoint3D" type="Generic6DOFJoint3D" parent="Player/FL"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.34, 0.1, -2)
node_a = NodePath("..")
node_b = NodePath("../../Chassis")

[node name="RayCast3D" type="RayCast3D" parent="Player/FL"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.15, 0)
target_position = Vector3(0, -0.3, 0)
debug_shape_custom_color = Color(1, 0.966667, 0, 1)

[node name="FR" type="RigidBody3D" parent="Player"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.67, -0.1, 1)
mass = 5.0
script = ExtResource("4_06lh1")
rollingResistance = 3.0

[node name="CollisionShape3D" type="CollisionShape3D" parent="Player/FR"]
transform = Transform3D(-4.37114e-08, -1, 0, 1, -4.37114e-08, 0, 0, 0, 1, 0, 0, 0)
shape = SubResource("CylinderShape3D_td361")

[node name="Generic6DOFJoint3D" type="Generic6DOFJoint3D" parent="Player/FR"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.1, -2)
node_a = NodePath("..")
node_b = NodePath("../../Chassis")

[node name="RayCast3D" type="RayCast3D" parent="Player/FR"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.15, 0)
target_position = Vector3(0, -0.3, 0)
debug_shape_custom_color = Color(1, 0.966667, 0, 1)

[node name="BL" type="RigidBody3D" parent="Player"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.67, 0, -1)
mass = 5.0
script = ExtResource("4_06lh1")
rollingResistance = 3.0

[node name="CollisionShape3D" type="CollisionShape3D" parent="Player/BL"]
transform = Transform3D(-4.37114e-08, -1, 0, 1, -4.37114e-08, 0, 0, 0, 1, 0, 0, 0)
shape = SubResource("CylinderShape3D_td361")

[node name="Generic6DOFJoint3D" type="Generic6DOFJoint3D" parent="Player/BL"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.34, 0, 0)
node_a = NodePath("..")
node_b = NodePath("../../Chassis")

[node name="RayCast3D" type="RayCast3D" parent="Player/BL"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.15, 0)
target_position = Vector3(0, -0.3, 0)
debug_shape_custom_color = Color(1, 0.966667, 0, 1)

[node name="BR" type="RigidBody3D" parent="Player"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.67, 0, -1)
mass = 5.0
script = ExtResource("4_06lh1")
rollingResistance = 3.0

[node name="CollisionShape3D" type="CollisionShape3D" parent="Player/BR"]
transform = Transform3D(-4.37114e-08, -1, 0, 1, -4.37114e-08, 0, 0, 0, 1, 0, 0, 0)
shape = SubResource("CylinderShape3D_td361")

[node name="Generic6DOFJoint3D" type="Generic6DOFJoint3D" parent="Player/BR"]
node_a = NodePath("..")
node_b = NodePath("../../Chassis")

[node name="RayCast3D" type="RayCast3D" parent="Player/BR"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.15, 0)
target_position = Vector3(0, -0.3, 0)
debug_shape_custom_color = Color(1, 0.966667, 0, 1)

[node name="UI" type="Node" parent="Player"]

[node name="Label" type="Label" parent="Player/UI"]
offset_right = 40.0
offset_bottom = 23.0
script = ExtResource("8_argdw")
gearboxNode = NodePath("../../Gearbox")

[node name="Label2" type="Label" parent="Player/UI"]
offset_top = 54.0
offset_right = 195.0
offset_bottom = 181.0
text = "W/S - Accelerate, Reverse
SHIFT - Brake
A/D - Steer
C - Switch Camera
R - Restart"

[node name="PlayerCamera" type="Camera3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.157226, 0)
current = true
near = 0.001
script = ExtResource("6_v0hk8")
TargetPath = NodePath("../Player/Chassis")
FollowSpeed = 50.0
CameraOffsets = PackedVector3Array(0, 3, -4, 0, 1, 0, 1, 1, 1, -1, 1, 1)
